@using WebApp.Models
@model WebApp.Models.SearchData
@using WebApp.Content
@using WebApp.Controllers

@{
    /**/

    ViewBag.Title = "GetResults";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var resList = Model.ResultList as List<WebApp.Models.Documents.ReportDocument>;
    var count = 5;
    count = resList.Count();
}

<head>
    <style type="text/css">
        table {
            width: 100%;
            border-collapse: collapse;
        }

        .scrollingTable {
            overflow-y: auto;
        }

        input {
            border: 0;
        }

        summary {
            width: 100%;
        }
    </style>
    <script type="text/javascript">
        function Save(id)
        {
            alert("Hello! I am an alert box!!");
            var sString = @Model.SearchString;
            
            @*$.post("/Search/StoreDoc", { searchData: sString, docid : id });*@

            return 0;
        }
        @*(string searchData, string docid)*@
    </script>
</head>


<body>
    <div class="jumbotron">
        @if (Model.ResultList.Count > 1)
        {
            <div class="h6 pb-3">Returned @Model.ResultList.Count results</div>
        }
        else
        {
            <div class="h6 pb-3">Returned 1 result</div>
        }
        <div class="results">

            @using (Html.BeginForm("GetResults", "Search"))
            {
                @Html.TextBoxFor(model => model.SearchString, new { @class = "form-control" })
            }

            @foreach (var item in Model.ResultList)
            {
                <div class="card text-left m-3">
                    <font size="+1">
                        <a id="docLink" href=@("https://mehdstorageacc.blob.core.windows.net/testcontainer/" + @item.InternalLink) onclick="Save(@item.Id);" link target="_blank"> @item.Name</a>
                        <br />
                    </font>

                    @if (item.Author.ToString() != "")
                    {
                        @Html.DisplayFor(modelItem => item.Author)
                        <br />
                    }

                    @if (item.Publisher.ToString() != "")
                    {
                        @Html.DisplayFor(modelItem => item.Publisher)
                        <br />
                    }
                    @if (item.Date.ToString() != "")
                    {
                        @Html.DisplayFor(modelItem => item.Date)
                        <br />
                    }

                    @if (item.Keywords.ToString() != "")
                    {
                        <span> Keywords:  <i>@Html.DisplayFor(modelItem => item.Keywords)</i> </span>
                    }

                    <i size="-1">
                        @if (item.Summary.ToString() != "")
                        {
                            <br />
                            @Html.DisplayFor(modelItem => item.Summary)
                        }
                    </i>

                </div>

            }

        </div>

    </div>

</body>

